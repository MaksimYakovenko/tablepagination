<header>
  <mat-toolbar color="primary">
    <mat-toolbar-row>
      <a href="/"><img class="toolbar-logo" [src]="'assets/images/logo.png'" alt="image"></a>
      <span class="toolbar-name">Максим Яковенко</span>
      <span class="spacer"></span>
      <div class="theme-toggle-container">
        <input id="themeSwitcher" class="ThemeToggle" type="checkbox" [formControl]="toggleControl">
        <label>Темна тема</label>
      </div>
      <a href="https://github.com/MaksimYakovenko"><span class="github-icon"><i class="fa-brands fa-github"></i> Github</span></a>
    </mat-toolbar-row>
  </mat-toolbar>
</header>

<main>
  <div class="table-container">
    <div class="mat-elevation-z8">
        <table mat-table [dataSource]="dataSource" class="table-with-border" matSort (matSortChange)="announceSortChange($event)">
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef columnResize> ID </th>
            <td mat-cell *matCellDef="let element"> {{element.id}} </td>
          </ng-container>

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef columnResize mat-sort-header sortActionDescription="Sort by name"> Назва заяви </th>
            <td mat-cell *matCellDef="let element" (dblclick)="toggleEditMode(element)">
              <div *ngIf="element.isEdit">
                <input type="text" [(ngModel)]="element.name" class="form-control"/>
              </div>
              <div *ngIf="!element.isEdit">
                {{element.name}}
              </div>
            </td>
          </ng-container>

          <ng-container matColumnDef="costs">
            <th mat-header-cell *matHeaderCellDef columnResize mat-sort-header sortActionDescription="Sort by costs"> Витрати </th>
            <td mat-cell *matCellDef="let element" (dblclick)="toggleEditMode(element)">
              <div *ngIf="element.isEdit">
                <input type="number" [(ngModel)]="element.costs" class="form-control"/>
              </div>
              <div *ngIf="!element.isEdit">
                {{element.costs}}
              </div>
            </td>
          </ng-container>

          <ng-container matColumnDef="symbol">
            <th mat-header-cell *matHeaderCellDef columnResize mat-sort-header sortActionDescription="Sort by symbol"> Позначення </th>
            <td mat-cell *matCellDef="let element" (dblclick)="toggleEditMode(element)">
              <div *ngIf="element.isEdit">
                <input type="text" [(ngModel)]="element.symbol" class="form-control"/>
              </div>
              <div *ngIf="!element.isEdit">
                {{element.symbol}}
              </div>
            </td>
          </ng-container>

          <ng-container matColumnDef="date">
            <th mat-header-cell *matHeaderCellDef columnResize mat-sort-header sortActionDescription="Sort by date" style="min-width: 150px;"> Дата створення </th>
            <td mat-cell *matCellDef="let element" (dblclick)="toggleEditMode(element)">
              <div *ngIf="element.isEdit">
                <mat-form-field>
                  <mat-label>Оберіть дату</mat-label>
                  <input matInput [matDatepicker]="picker" [(ngModel)]="element.date">
                  <mat-hint>DD.MM.YYYY</mat-hint>
                  <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
              </div>
              <div *ngIf="!element.isEdit">
                {{formatDate(element.date)}}
              </div>
            </td>
          </ng-container>

          <ng-container matColumnDef="agreed">
            <th mat-header-cell *matHeaderCellDef columnResize mat-sort-header sortActionDescription="Sort by agreed"> Погодження </th>
            <td mat-cell *matCellDef="let element" (dblclick)="toggleEditMode(element)">
              <div *ngIf="element.isEdit">
                <mat-radio-group aria-label="Select an option" (change)="updateAgreedStatus($event, element)">
                  <mat-radio-button value="Погоджено" >Погоджено</mat-radio-button>
                  <mat-radio-button value="Не погоджено">Не погоджено</mat-radio-button>
                </mat-radio-group>
              </div>
              <div *ngIf="!element.isEdit">
                {{element.agreed}}
              </div>
            </td>
          </ng-container>

          <ng-container matColumnDef="edit">
            <th mat-header-cell *matHeaderCellDef columnResize>Статус</th>
            <td mat-cell *matCellDef="let element">
              <div *ngIf="element.isEdit">
                <button class="btn btn-sm btn-success" style="margin-right: 10px;" (click)="element.isEdit=false">Оновити</button>
                <button class="btn btn-sm btn-success" (click)="cancelEdit(element)">Закрити</button>
              </div>
              <div *ngIf="!element.isEdit">
                <button class="btn btn-sm btn-success" (click)="editElement(element)">Редагувати</button>
              </div>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

        <mat-paginator [pageSizeOptions]="[25, 50, 100]"
                       showFirstLastButtons="true"
                       aria-label="Select page of periodic elements">
        </mat-paginator>
      </div>
  </div>
</main>

<footer>
  <div class="row-container">
    <div class="footer-content">
      <div class="logo-container">
        <div class="licence">
          <p>2019 © TASCOMBANK.UA</p>
          <p>ЛІЦЕНЗІЯ НБУ №84 ВІД 25.10.2011</p>
          <p>2012 - 2032 © ТАСКОМБАНК</p>
        </div>
        <a href="https://sportbank.ua/"><img class="sportbank-logo" style="margin-bottom: 1px" [src]="'assets/images/sportbank_logo-xs.png'" alt="image"></a>
        <a href="https://izibank.com.ua/"><img class="izibank-logo" [src]="'assets/images/izibank.png'"></a>
        <a href="https://www.fg.gov.ua/"><img class="fund-logo" [src]="'assets/images/fund.png'"></a>
        <div class="funds">
          <p>Ваші кошти захищені Фондом</p>
          <p>гарантування вкладів фізичних осіб</p>
        </div>
      </div>
      <div class="footer-contact-info">
        <p>АТ «ТАСКОМБАНК»</p>
        <p>01032, м. Київ, вул. Симона Петлюри, буд. 30</p>
        <p>0 800 503 580 (безкоштовно з усіх телефонів)</p>
        <p>044 393 25 90 (згідно з тарифами Вашого оператора зв'язку)</p>
      </div>
      <ul class="footer-social-links">
        <li class="flex">
          <a href="https://www.facebook.com/tascombank"><i class="fab fa-facebook-f" style="margin-top: 6px"></i></a>
        </li>

        <li class="flex">
          <a href="https://twitter.com/tascombank"><i class="fa-brands fa-x-twitter" style="margin-top: 6px"></i></a>
        </li>

        <li class="flex">
          <a href="https://www.instagram.com/tascombank/"><i class="fab fa-instagram" style="margin-top: 6px"></i></a>
        </li>

        <li class="flex">
          <a href="https://tascombank.ua/"><i class="fab fa-google" style="margin-top: 6px"></i></a>
        </li>
      </ul>
      <hr>
      <br/>
      <small>ТАСКОМБАНК - РАЗОМ ЗМОЖЕМО ВСЕ!</small>
    </div>
  </div>
</footer>
